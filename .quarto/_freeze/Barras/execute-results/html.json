{
  "hash": "d9a5420c5153b56c13f08bc165d7dacf",
  "result": {
    "engine": "knitr",
    "markdown": "# Grafico Barras\n\nAquí hay harta variedad, comenzando por lo más simple un grafico de barras con un solo campo categórico.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Importes\nlibrary(data.table)\nlibrary(ggplot2)\n```\n:::\n\n\n\n## Barras simple\n\nPrimero los datos\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngdata <- data.frame(grupo = c(\"A\", \"B\", \"C\"), valor = c(13, 15, 6), \n                    valmin = c(10, 10, 5), valmax = c(15, 19, 10))\nprint(gdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  grupo valor valmin valmax\n1     A    13     10     15\n2     B    15     10     19\n3     C     6      5     10\n```\n\n\n:::\n:::\n\n\n\nAhora lo definicmos con geom_bar, en este caso siempr será postion dodge y stat identity\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# La versión más simple\nggplot(gdata, aes(x = grupo, y = valor)) +\n    geom_bar(position = 'dodge', stat = 'identity')\n```\n\n::: {.cell-output-display}\n![](barras_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n\n### Colorear barras\n\nLo vamos a hermosear un poco, le ponemos colores diferentes, le quitamos el expand al eje Y. Para esto (en mi opinión) es usar la vuelta larga, es decir creando un vector que tendrá los valores de color que deseamos. en el fill hacemos referencia a \"grupo\"\n\n> Si vamos a cambiar el `fill`, este debe estar declarado antes en el `aes`\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Vector de colores\nvector_colores <- c(\"A\" = \"steelblue\",\n                    \"B\" = \"hotpink2\", \n                    \"C\" = \"aquamarine4\")\nprint(vector_colores)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n            A             B             C \n  \"steelblue\"    \"hotpink2\" \"aquamarine4\" \n```\n\n\n:::\n\n```{.r .cell-code}\n# Hermoseado\nggplot(gdata, aes(x = grupo, y = valor, fill = grupo)) +\n    geom_bar(position = 'dodge', stat = 'identity', color = 'grey30') +\n    scale_fill_manual(\"Colores\", \n                      values = vector_colores, \n                      labels = c(\"Steelblue\", \"Hotpink2\", \"Aquamarine4\")) +\n    scale_y_continuous(limits = c(0, 16), expand = c(0, 0)) + \n    labs(x = \"Grupo\", y = \"Valores\")\n```\n\n::: {.cell-output-display}\n![](barras_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n\nEl resto ya serían cosas estéticas como poner etiquetas, cambiar el theme, poner titulos etc.\n\n## Barras de error\n\nEsta es una solicitud constante, vamos a necesitar los valores minimos o máximos, independiente que sean desviaciones estándar, limites, SEM o lo que sea.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Miremos los datos\nprint(gdata)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  grupo valor valmin valmax\n1     A    13     10     15\n2     B    15     10     19\n3     C     6      5     10\n```\n\n\n:::\n:::\n\n\n\nLa tabla ya tiene minimos y máximos, usemos y creamos las barras de error. Continuamos desde el código del gráfico anterior.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Vector de colores\nvector_colores <- c(\"A\" = \"steelblue\",\n                    \"B\" = \"hotpink2\", \n                    \"C\" = \"aquamarine4\")\nprint(vector_colores)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n            A             B             C \n  \"steelblue\"    \"hotpink2\" \"aquamarine4\" \n```\n\n\n:::\n\n```{.r .cell-code}\n# Hermoseado\nggplot(gdata, aes(x = grupo, y = valor, fill = grupo)) +\n    geom_bar(position = 'dodge', stat = 'identity', color = 'grey30') +\n    \n    # Colores\n    scale_fill_manual(\"Colores\", \n                      values = vector_colores, \n                      labels = c(\"Steelblue\", \"Hotpink2\", \"Aquamarine4\")) +\n    \n    # Barras de error\n    geom_errorbar(aes(ymin = valmin, ymax = valmax), \n                  width = 0.2,\n                  size = 1,\n                  color = \"grey30\") +\n    \n    # Eje y etiquetas\n    scale_y_continuous(limits = c(0, 20), expand = c(0, 0)) + \n    labs(x = \"Grupo\", y = \"Valores\") +\n    theme_bw()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](barras_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "barras_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}